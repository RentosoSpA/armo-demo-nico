import{F as s,r as c,b6 as v,bZ as N,j as e,g as y,k as p,a as x,T as b,I as o,B as P,o as m}from"./index-BmXdxNCh.js";const{Title:w,Text:E}=b,{TextArea:l}=o,S=()=>{const[n]=s.useForm(),[h,d]=c.useState(!1),{empresa:i}=v(),{empresa:r,loading:g,error:f,fetchEmpresaById:u,updateEmpresaInfo:j}=N();c.useEffect(()=>{console.log("[PerfilInmobiliario] userEmpresa:",i),i!=null&&i.id?(console.log("[PerfilInmobiliario] Fetching empresa with id:",i.id),u(i.id)):console.log("[PerfilInmobiliario] No userEmpresa.id available")},[i==null?void 0:i.id,u]),c.useEffect(()=>{console.log("[PerfilInmobiliario] empresa data:",r),r&&(console.log("[PerfilInmobiliario] Setting form values"),n.setFieldsValue({nombre:r.nombre,sobreNosotros:r.sobre_nosotros,mision:r.mision,vision:r.vision,email:r.email,telefono:r.telefono,direccion:r.direccion}))},[r,n]);const I=async a=>{if(!(r!=null&&r.id)){m.error("No se pudo identificar la empresa");return}d(!0);try{const t={nombre:a.nombre,sobre_nosotros:a.sobreNosotros,mision:a.mision,vision:a.vision,email:a.email,telefono:a.telefono,direccion:a.direccion};await j(r.id,t),m.success("Información del perfil inmobiliario actualizada correctamente")}catch(t){console.error("Error updating empresa:",t),m.error("Error al actualizar la información del perfil inmobiliario")}finally{d(!1)}};return g?e.jsx("div",{className:"text-center",children:e.jsx(y,{size:"large"})}):f?e.jsx(p,{direction:"vertical",size:"small",align:"center",className:"w-full",styles:{item:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}},children:e.jsx(x,{className:"w-full",children:e.jsx("div",{className:"text-center",children:e.jsx(b.Text,{type:"danger",children:f})})})}):e.jsxs(p,{direction:"vertical",size:"small",align:"start",className:"w-full",styles:{item:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"}},children:[e.jsxs("div",{className:"mb-24",children:[e.jsx(w,{level:2,className:"title-text text-left mb-0",children:"Perfil Inmobiliario"}),e.jsx(E,{className:"paragraph-text paragraph-secondary text-left mb-0",children:"Actualiza la información pública de tu empresa que se mostrará en armonioso"})]}),e.jsx(x,{className:"profile-card w-full",children:e.jsxs(s,{form:n,layout:"vertical",onFinish:I,className:"mt-0",children:[e.jsx(s.Item,{label:"Nombre de la Empresa",name:"nombre",rules:[{required:!0,message:"Por favor ingresa el nombre de la empresa"}],children:e.jsx(o,{placeholder:"Nombre de la empresa"})}),e.jsx(s.Item,{label:"Sobre Nosotros",name:"sobreNosotros",rules:[{required:!0,message:"Por favor ingresa la descripción de la empresa"}],children:e.jsx(l,{rows:4,placeholder:"Describe tu empresa, su historia y valores..."})}),e.jsx(s.Item,{label:"Misión",name:"mision",rules:[{required:!0,message:"Por favor ingresa la misión de la empresa"}],children:e.jsx(l,{rows:3,placeholder:"¿Cuál es la misión de tu empresa?"})}),e.jsx(s.Item,{label:"Visión",name:"vision",rules:[{required:!0,message:"Por favor ingresa la visión de la empresa"}],children:e.jsx(l,{rows:3,placeholder:"¿Cuál es la visión de tu empresa?"})}),e.jsx(s.Item,{label:"Email de Contacto",name:"email",rules:[{required:!0,message:"Por favor ingresa el email de contacto"},{type:"email",message:"Ingresa un email válido"}],children:e.jsx(o,{placeholder:"contacto@empresa.com"})}),e.jsx(s.Item,{label:"Teléfono",name:"telefono",rules:[{required:!0,message:"Por favor ingresa el teléfono"}],children:e.jsx(o,{placeholder:"+56 9 1234 5678"})}),e.jsx(s.Item,{label:"Dirección",name:"direccion",rules:[{required:!0,message:"Por favor ingresa la dirección"}],children:e.jsx(l,{rows:2,placeholder:"Dirección completa de la empresa"})}),e.jsx(s.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",loading:h,size:"large",className:"w-full",children:"Guardar Cambios"})})]})})]})};export{S as default};
