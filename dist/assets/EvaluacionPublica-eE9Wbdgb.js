import{i as D,r as f,j as e,a as i,k as u,T as P,l as T,B as b,m as R,P as k,n as F,o as d,p as $,R as g,C as p,b as L,q as O,t as N,v as U}from"./index-BmXdxNCh.js";import{C as v}from"./circle-check-BDmSzWpF.js";const M=async(o,t)=>{const s=new FormData;return s.append("document",t),(await D.post(`undefined/gcp/documents/upload?folderPath=${o}`,s)).data.data},q=async o=>{console.log("Notification would be sent:",o)},B=async(o,t)=>{const s={title:"Nuevo Prospecto",body:`${t} ha enviado documentos para evaluación`,data:{type:"prospecto_upload",prospectoId:o,prospectoName:t},clickAction:"/workspace?selectedKey=Oportunidades"};await q(s)},{Title:I,Text:h}=P,A=({prospectoId:o,onSuccess:t})=>{const[s,n]=f.useState([]),[r,y]=f.useState(!1),[S,m]=f.useState(0),w=a=>(a.size/1024/1024<10||d.error("El archivo debe ser menor a 10MB!"),!1),E=async()=>{try{if(!o){d.error("ID de oportunidad no válido");return}if(s.length===0){d.error("Por favor selecciona al menos un documento");return}y(!0),m(10);const a=s.map(async(l,x)=>{if(l.originFileObj){const C=`Oportunidades/${o}`;await M(C,l.originFileObj),m(10+(x+1)/s.length*80)}});await Promise.all(a),m(100),await B(o,"Oportunidad"),d.success("Documentos enviados exitosamente. Te notificaremos cuando se complete la evaluación."),n([]),m(0),t&&t()}catch(a){console.error("Error during submission:",a),d.error("Error al enviar los documentos. Por favor intenta nuevamente.")}finally{y(!1)}},z={name:"file",multiple:!0,fileList:s,beforeUpload:w,onChange:({fileList:a})=>{n(a)},onRemove:a=>{const l=s.indexOf(a),x=s.slice();x.splice(l,1),n(x)}};return e.jsx(i,{style:{maxWidth:800,margin:"0 auto"},children:e.jsxs(u,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(I,{level:2,children:"Envío de Documentos"}),e.jsx(h,{type:"secondary",children:"Sube los documentos requeridos para tu evaluación de oportunidad"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-16",children:[e.jsx(h,{strong:!0,children:"Documentos Requeridos"}),e.jsx(T,{...z,children:e.jsx(b,{icon:e.jsx(R,{}),disabled:r,children:"Seleccionar Archivos"})}),e.jsx(h,{type:"secondary",className:"d-block mt-8",children:"Sube los documentos necesarios (máximo 10MB por archivo)"})]}),r&&e.jsxs("div",{className:"mb-16",children:[e.jsx(k,{percent:S,status:"active"}),e.jsx(h,{type:"secondary",className:"d-block text-center",children:"Procesando documentos..."})]}),e.jsx("div",{className:"text-center mt-24",children:e.jsx(b,{type:"primary",icon:e.jsx(F,{}),size:"large",loading:r,disabled:s.length===0,onClick:E,children:"Enviar Documentos"})})]})]})})},{Title:j,Text:c}=P,W=()=>{const{prospectoId:o}=$(),[t,s]=f.useState(0),n=()=>{s(1)},r=[{title:"Envío de Documentos",description:"Completa el formulario y sube tus documentos",icon:e.jsx(N,{size:20})},{title:"Confirmación",description:"Documentos recibidos exitosamente",icon:e.jsx(v,{size:20})}];return e.jsx("div",{className:"p-24",children:e.jsx(g,{justify:"center",children:e.jsx(p,{xs:24,lg:20,xl:16,children:e.jsxs(u,{direction:"vertical",size:"large",className:"w-full",children:[e.jsxs("div",{className:"text-center mb-32",children:[e.jsx(j,{level:1,children:"Evaluación de Prospectos"}),e.jsx(c,{type:"secondary",style:{fontSize:16},children:"Envía tus documentos para ser evaluado como prospecto"})]}),e.jsx(i,{children:e.jsx(L,{current:t,items:r,className:"mb-32"})}),t===0?e.jsx(A,{prospectoId:o,onSuccess:n}):e.jsx(i,{children:e.jsx(O,{icon:e.jsx(v,{style:{color:"#52c41a"}}),title:"Documentos Enviados Exitosamente",subTitle:"Hemos recibido tus documentos y los estamos procesando",extra:[e.jsxs(c,{type:"secondary",className:"d-block mb-16",children:["ID de seguimiento: ",e.jsx(c,{code:!0,children:o})]},"info"),e.jsx(c,{type:"secondary",className:"d-block",children:"Te notificaremos por email cuando se complete la evaluación de tus documentos. Este proceso puede tomar entre 1-3 días hábiles."},"message")]})}),e.jsxs(g,{gutter:[16,16],children:[e.jsx(p,{xs:24,md:8,children:e.jsx(i,{size:"small",children:e.jsxs(u,{direction:"vertical",align:"center",className:"w-full",children:[e.jsx(N,{size:32,color:"#1890ff"}),e.jsx(j,{level:5,className:"text-center m-0",children:"Documentos Requeridos"}),e.jsx(c,{type:"secondary",className:"text-center",children:"Cédula de ciudadanía, certificados laborales, extractos bancarios, etc."})]})})}),e.jsx(p,{xs:24,md:8,children:e.jsx(i,{size:"small",children:e.jsxs(u,{direction:"vertical",align:"center",className:"w-full",children:[e.jsx(U,{size:32,color:"#52c41a"}),e.jsx(j,{level:5,className:"text-center m-0",children:"Proceso Simple"}),e.jsx(c,{type:"secondary",className:"text-center",children:"Completa el formulario y sube tus documentos en formato digital"})]})})}),e.jsx(p,{xs:24,md:8,children:e.jsx(i,{size:"small",children:e.jsxs(u,{direction:"vertical",align:"center",className:"w-full",children:[e.jsx(v,{size:32,color:"#faad14"}),e.jsx(j,{level:5,className:"text-center m-0",children:"Evaluación Rápida"}),e.jsx(c,{type:"secondary",className:"text-center",children:"Recibe una respuesta en 1-3 días hábiles con el resultado de tu evaluación"})]})})})]})]})})})})};export{W as default};
