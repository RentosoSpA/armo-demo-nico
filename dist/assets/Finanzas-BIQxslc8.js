import{c as _,x as W,aE as K,c2 as k,j as e,c3 as U,c4 as q,c5 as Y,r as u,I as G,B as I,o as x,e as J,L as H,b6 as X,g as Z}from"./index-BmXdxNCh.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],V=_("pencil",Q),D=[{id:"1",propiedadId:"prop-001",propiedadNombre:"Depto Las Condes 2D+2B",monto:85e4,estado:"Pagada",fechaEsperada:"2025-01-15",tipo:"arriendo"},{id:"2",propiedadId:"prop-002",propiedadNombre:"Casa Providencia 3D+3B",monto:12e5,estado:"Pendiente",fechaEsperada:"2025-02-10",tipo:"arriendo"},{id:"3",propiedadId:"prop-003",propiedadNombre:"Oficina Apoquindo",monto:65e4,estado:"Atrasada",fechaEsperada:"2025-01-20",tipo:"arriendo"},{id:"4",propiedadId:"prop-004",propiedadNombre:"Depto Vitacura 1D+1B",monto:72e4,estado:"Pagada",fechaEsperada:"2025-01-12",tipo:"arriendo"},{id:"5",propiedadId:"prop-005",propiedadNombre:"Casa Lo Barnechea 4D+4B",monto:15e5,estado:"Pendiente",fechaEsperada:"2025-02-15",tipo:"venta"}],ee=[{id:"g1",categoria:"Fijo",nombre:"Portal Inmobiliario",monto:45e3,estado:"Pagado",fechaVencimiento:"2025-02-05",logo:"https://via.placeholder.com/40x40?text=PI"},{id:"g2",categoria:"Fijo",nombre:"Propit",monto:35e3,estado:"Pendiente",fechaVencimiento:"2025-02-10",logo:"https://via.placeholder.com/40x40?text=PR"},{id:"g3",categoria:"Variable",nombre:"NotarÃ­a escritura",monto:12e4,estado:"Atrasado",fechaVencimiento:"2025-01-28"},{id:"g4",categoria:"Fijo",nombre:"Yapo",monto:25e3,estado:"Pagado",fechaVencimiento:"2025-02-05",logo:"https://via.placeholder.com/40x40?text=YP"},{id:"g5",categoria:"Variable",nombre:"Marketing digital",monto:8e4,estado:"Pendiente",fechaVencimiento:"2025-02-20"},{id:"g6",categoria:"Fijo",nombre:"Oficina arriendo",monto:45e4,estado:"Pagado",fechaVencimiento:"2025-02-01"}],se=[{label:"Crecimiento mensual",value:"+12%",trend:"up",trendValue:"+$240k vs mes anterior",icon:"ğŸ“ˆ"},{label:"% Cobranza a tiempo",value:"85%",trend:"up",trendValue:"+5% este mes",icon:"â°"},{label:"Promedio por propiedad",value:"$825k",trend:"neutral",trendValue:"Sin cambios",icon:"ğŸ "}],ae={porMes:[{mes:"Ene",ingresos:245e4,comisiones:45e4,gastos:32e4},{mes:"Feb",ingresos:28e5,comisiones:52e4,gastos:34e4},{mes:"Mar",ingresos:32e5,comisiones:68e4,gastos:38e4},{mes:"Abr",ingresos:295e4,comisiones:54e4,gastos:36e4},{mes:"May",ingresos:34e5,comisiones:72e4,gastos:4e5},{mes:"Jun",ingresos:315e4,comisiones:59e4,gastos:37e4},{mes:"Jul",ingresos:29e5,comisiones:51e4,gastos:35e4},{mes:"Ago",ingresos:33e5,comisiones:65e4,gastos:39e4},{mes:"Sep",ingresos:35e5,comisiones:74e4,gastos:42e4},{mes:"Oct",ingresos:325e4,comisiones:61e4,gastos:385e3},{mes:"Nov",ingresos:36e5,comisiones:78e4,gastos:44e4},{mes:"Dic",ingresos:38e5,comisiones:85e4,gastos:48e4}],totalIngresos:383e5,totalComisiones:764e4,totalGastos:4635e3},oe=async()=>{await W();const a=D.filter(t=>t.estado==="Pagada").reduce((t,d)=>t+d.monto,0),s=3e6,n=a;return{...ae,meta:{objetivoMensual:s,progreso:n,porcentaje:Math.round(n/s*100),diasRestantes:15},comisiones:D,comisionesStats:{totalMes:a,mejorPropiedad:{nombre:"Casa Providencia 3D+3B",monto:12e5},promedioComision:85e4,masAltaPendiente:12e5,porcentajeConComision:75},gastos:ee,kpis:se,configuracion:{metaMensual:3e6,porcentajeComision:50,categorias:["Portales","Servicios","NotarÃ­as","Marketing"],recordatorios:!0,conexionBancaria:!1},ultimaActualizacion:new Date().toISOString()}},te=()=>{const a=k.kpis.mrr,s=k.kpis.ingresos_adicionales;return{porMes:k.ingresos_mensuales.map(n=>({mes:n.mes,ingresos:n.ingresos,comisiones:0,gastos:Math.floor(n.ingresos*.35)})),totalIngresos:a+s,totalComisiones:0,totalGastos:Math.floor((a+s)*.35),meta:{objetivoMensual:6e6,progreso:a+s,porcentaje:Math.round((a+s)/6e6*100),diasRestantes:15},comisiones:[],comisionesStats:{totalMes:0,mejorPropiedad:{nombre:"Oficina Privada 201",monto:0},promedioComision:0,masAltaPendiente:0,porcentajeConComision:0},gastos:[{id:"gasto-001",categoria:"Fijo",nombre:"Arriendo del local",monto:28e5,estado:"Pagado",fechaVencimiento:new Date(Date.now()+7200*60*1e3).toISOString()},{id:"gasto-002",categoria:"Fijo",nombre:"Servicios bÃ¡sicos",monto:45e4,estado:"Pagado",fechaVencimiento:new Date(Date.now()+11520*60*1e3).toISOString()},{id:"gasto-003",categoria:"Variable",nombre:"CafÃ© y suministros",monto:28e4,estado:"Pendiente",fechaVencimiento:new Date(Date.now()+288*60*60*1e3).toISOString()},{id:"gasto-004",categoria:"Variable",nombre:"Limpieza y mantenciÃ³n",monto:35e4,estado:"Pagado",fechaVencimiento:new Date(Date.now()+4320*60*1e3).toISOString()}],kpis:[{label:"MRR",value:`$${(a/1e6).toFixed(1)}M`,trend:"up",trendValue:"+5.2%",icon:"ğŸ’°"},{label:"OcupaciÃ³n",value:`${k.kpis.tasa_ocupacion}%`,trend:"up",trendValue:"+3%",icon:"ğŸ“Š"},{label:"Miembros",value:k.kpis.miembros_activos,trend:"up",trendValue:"+1",icon:"ğŸ‘¥"},{label:"Eventos",value:8,trend:"neutral",trendValue:"0",icon:"ğŸ¤"}],configuracion:{metaMensual:6e6,porcentajeComision:0,categorias:["Fijo","Variable","Servicios","Marketing"],recordatorios:!0,conexionBancaria:!1},ultimaActualizacion:new Date().toISOString()}},ne=async()=>{const{activePreset:a}=K.getState();return a==="coworking"?(await new Promise(s=>setTimeout(s,500)),te()):oe()},ie=({kpi:a,osoTooltip:s,index:n})=>{console.log("ğŸ» KPICard: Props recibidas:",{kpi:a,index:n});const t=()=>{switch(a.trend){case"up":return e.jsx(Y,{size:16,className:"trend-icon trend-up"});case"down":return e.jsx(q,{size:16,className:"trend-icon trend-down"});default:return e.jsx(U,{size:16,className:"trend-icon trend-neutral"})}},d=()=>{const l=["kpi-card-green","kpi-card-purple","kpi-card-pink","kpi-card-orange"];return`kpi-card ${l[n%l.length]}`};return e.jsxs("div",{className:d(),title:s,children:[e.jsx("div",{className:"kpi-icon-circle",children:e.jsx("span",{className:"kpi-icon",children:a.icon})}),e.jsxs("div",{className:"kpi-content",children:[e.jsx("div",{className:"kpi-value",children:a.value}),e.jsx("div",{className:"kpi-label",children:a.label}),e.jsxs("div",{className:"kpi-trend",children:[t(),e.jsx("span",{className:"kpi-trend-value",children:a.trendValue})]})]})]})},re=({className:a})=>e.jsxs("svg",{className:a,width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsxs("defs",{children:[e.jsxs("filter",{id:"glassEffect",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.5",result:"blur"}),e.jsx("feColorMatrix",{in:"blur",type:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 1 0",result:"glass"})]}),e.jsxs("linearGradient",{id:"glassGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"rgba(255,255,255,1)",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:"rgba(255,255,255,0.85)",stopOpacity:1}})]})]}),e.jsx("ellipse",{cx:"20",cy:"10",rx:"5",ry:"6.5",fill:"url(#glassGradient)",stroke:"rgba(255,255,255,0.5)",strokeWidth:"0.8",filter:"url(#glassEffect)"}),e.jsx("ellipse",{cx:"11",cy:"13",rx:"4.5",ry:"6",fill:"url(#glassGradient)",stroke:"rgba(255,255,255,0.5)",strokeWidth:"0.8",transform:"rotate(-15 11 13)",filter:"url(#glassEffect)"}),e.jsx("ellipse",{cx:"29",cy:"13",rx:"4.5",ry:"6",fill:"url(#glassGradient)",stroke:"rgba(255,255,255,0.5)",strokeWidth:"0.8",transform:"rotate(15 29 13)",filter:"url(#glassEffect)"}),e.jsx("ellipse",{cx:"20",cy:"28",rx:"8.5",ry:"7.5",fill:"url(#glassGradient)",stroke:"rgba(255,255,255,0.5)",strokeWidth:"0.8",filter:"url(#glassEffect)"}),e.jsx("ellipse",{cx:"11",cy:"25",rx:"3.5",ry:"4",fill:"url(#glassGradient)",stroke:"rgba(255,255,255,0.5)",strokeWidth:"0.8",filter:"url(#glassEffect)"}),e.jsx("ellipse",{cx:"29",cy:"25",rx:"3.5",ry:"4",fill:"url(#glassGradient)",stroke:"rgba(255,255,255,0.5)",strokeWidth:"0.8",filter:"url(#glassEffect)"}),e.jsx("path",{d:"M 20 3.5 L 20 1",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("path",{d:"M 9.5 7.5 L 8 5",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("path",{d:"M 30.5 7.5 L 32 5",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.2",strokeLinecap:"round"})]}),ce=({meta:a})=>{console.log("ğŸ» OsoGoalGauge: Props recibidas:",a);const{progreso:s,objetivoMensual:n,porcentaje:t,diasRestantes:d}=a,[l,m]=u.useState(!1),[h,g]=u.useState(0),p=b=>`$${(b/1e6).toFixed(2)}M`,f=()=>t>=100?"Â¡Meta cumplida! ğŸ‰":t>=90?"Â¡Casi lo logras! ğŸ’ª":t>=75?"Â¡Vas excelente! â­":t>=50?"Mitad del camino ğŸš€":t>=25?"Â¡Sigue asÃ­! ğŸ¾":"Â¡TÃº puedes! ğŸ’«",j=()=>t>=100?"#10b981":t>=70?"#22c55e":t>=50?"#eab308":t>=30?"#f59e0b":"#ef4444",i=n-s;u.useEffect(()=>{const b=setTimeout(()=>{g(Math.min(t,100))},300);return()=>clearTimeout(b)},[t]),u.useEffect(()=>{if(t>=100){const b=setTimeout(()=>{m(!0)},1500);return()=>clearTimeout(b)}else m(!1)},[t]);const c=-90,N=90,r=N-c,o=c+h/100*r,C=150,O=150,y=100,E=16,F=b=>{const v=(b-90)*Math.PI/180;return{x:C+y*Math.cos(v),y:O+y*Math.sin(v)}},w=(b,v)=>{const S=F(b),M=F(v),z=v-b<=180?"0":"1";return["M",S.x,S.y,"A",y,y,0,z,1,M.x,M.y].join(" ")},$=w(c,N),L=w(c,o),P=F(o);return e.jsxs("div",{className:"oso-goal-gauge",children:[e.jsxs("div",{className:"gauge-container",children:[e.jsxs("svg",{width:"300",height:"180",viewBox:"0 0 300 200",className:"gauge-svg",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",style:{stopColor:"#ef4444",stopOpacity:1}}),e.jsx("stop",{offset:"50%",style:{stopColor:"#eab308",stopOpacity:1}}),e.jsx("stop",{offset:"100%",style:{stopColor:j(),stopOpacity:1}})]}),e.jsxs("filter",{id:"glassArc",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1",result:"blur"}),e.jsx("feColorMatrix",{in:"blur",type:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.9 0",result:"glass"})]}),e.jsxs("filter",{id:"celebrationGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"4",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:$,fill:"none",stroke:"rgba(255, 255, 255, 0.15)",strokeWidth:E,strokeLinecap:"round",filter:"url(#glassArc)"}),e.jsx("path",{d:L,fill:"none",stroke:"url(#progressGradient)",strokeWidth:E,strokeLinecap:"round",filter:"url(#glassArc)",className:"gauge-progress-arc",style:{transition:"d 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}}),e.jsx("g",{transform:`translate(${P.x-20}, ${P.y-20})`,className:`gauge-paw ${l?"celebrating":""}`,style:{transition:"transform 1.2s cubic-bezier(0.4, 0, 0.2, 1)"},children:e.jsx(re,{className:"gauge-paw-svg"})}),l&&e.jsx("g",{className:"gauge-confetti",children:[...Array(16)].map((b,v)=>{const S=v*360/16,M=30+Math.random()*20,z=S*Math.PI/180,R=P.x+M*Math.cos(z),T=P.y+M*Math.sin(z),A=["#10b981","#3b82f6","#f59e0b","#ef4444","#a855f7","#ec4899"],B=A[v%A.length];return e.jsx("circle",{cx:R,cy:T,r:"3",fill:B,filter:"url(#celebrationGlow)",className:"confetti-particle",style:{animationDelay:`${v*.05}s`}},v)})})]}),e.jsx("div",{className:"gauge-center-message",children:e.jsxs("div",{className:"gauge-amount gauge-amount--current",children:[e.jsx("div",{className:"gauge-amount-label",children:"Actual"}),e.jsx("div",{className:"gauge-amount-value",children:p(s)})]})})]}),e.jsxs("div",{className:"gauge-footer",children:[e.jsx("div",{className:"gauge-footer-amounts",children:e.jsx("div",{className:"gauge-motivational-text",children:f()})}),e.jsx("div",{className:"gauge-footer-info",children:t>=100?e.jsx("span",{className:"gauge-info-success",children:"ğŸ‰ Â¡Meta superada!"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"gauge-info-missing",children:["Faltan ",p(i)]}),e.jsx("span",{className:"gauge-info-separator",children:"Â·"}),e.jsxs("span",{className:"gauge-info-days",children:[d," dÃ­as restantes"]})]})})]})]})},le=({userName:a,meta:s,kpis:n,datosGrafico:t,onUpdateMeta:d})=>{console.log("ğŸ» ResumenGeneral: Componente montado con props:",{userName:a,meta:s,kpis:n,datosGrafico:t}),console.log("ğŸ» ResumenGeneral: Validando props - meta:",s,"kpis:",n,"userName:",a);const[l,m]=u.useState(!1),[h,g]=u.useState(!1),[p,f]=u.useState(s.objetivoMensual);u.useEffect(()=>{s.porcentaje>=100&&!l&&(console.log("ğŸ» ResumenGeneral: Â¡Meta cumplida! Mostrando confetti"),m(!0),setTimeout(()=>m(!1),3e3))},[s.porcentaje,l]);const j=()=>{g(!0),f(s.objetivoMensual)},i=()=>{if(p<=0){x.error("La meta debe ser mayor a 0");return}d&&(d(p),x.success("Meta actualizada correctamente")),g(!1)},c=()=>{g(!1),f(s.objetivoMensual)},N=r=>`$${(r/1e3).toFixed(0)}k`;return e.jsx("div",{className:"resumen-general-compact",children:e.jsxs("div",{className:"resumen-compact-layout",children:[e.jsxs("div",{className:"resumen-progress-column",children:[e.jsxs("div",{className:"resumen-header-compact",children:[e.jsxs("h4",{className:"resumen-title-compact",children:[s.porcentaje,"% de tu meta"," ",h?e.jsxs("span",{className:"meta-edit-container",children:[e.jsx(G,{type:"number",value:p,onChange:r=>f(Number(r.target.value)),onPressEnter:i,onBlur:i,className:"meta-input",prefix:"$",autoFocus:!0,style:{width:"100px"}}),e.jsx(I,{type:"text",size:"small",onClick:c,className:"meta-cancel-btn",children:"âœ•"})]}):e.jsxs("span",{className:"meta-editable",onClick:j,title:"Click para editar meta",children:[N(s.objetivoMensual),e.jsx(V,{size:14,className:"meta-edit-icon"})]})]}),l&&e.jsx("div",{className:"meta-cumplida-badge-compact",children:"ğŸ‰ Â¡Meta cumplida!"})]}),e.jsx("div",{className:"gauge-container-compact",children:e.jsx(ce,{meta:s})})]}),e.jsx("div",{className:"resumen-kpis-column",children:n.map((r,o)=>e.jsx(ie,{kpi:r,index:o},o))})]})})},de=({comisiones:a,stats:s,porcentajeComision:n=50,onUpdatePorcentaje:t})=>{console.log("ğŸ»ğŸ”¥ ComisionesRentabilidad: NUEVO BUILD - porcentajeComision =",n),console.log("ğŸ» ComisionesRentabilidad: Componente montado con:",{comisiones:a,stats:s,porcentajeComision:n});const d=J(),[l,m]=u.useState(!1),[h,g]=u.useState(n),p=[...a].sort((r,o)=>o.monto-r.monto).slice(0,3);console.log("ğŸ» ComisionesRentabilidad: Top 3 =",p);const f=r=>["ğŸ¥‡","ğŸ¥ˆ","ğŸ¥‰"][r]||"",j=r=>{d(`/propiedades/${r}`)},i=()=>{m(!0),g(n)},c=()=>{if(h<0||h>100){x.error("El porcentaje debe estar entre 0 y 100");return}t&&(t(h),x.success("Porcentaje de comisiÃ³n actualizado")),m(!1)},N=()=>{m(!1),g(n)};return e.jsxs("div",{className:"comisiones-compact",children:[e.jsxs("div",{className:"comisiones-summary",children:[e.jsxs("div",{className:"comisiones-total-card",children:[e.jsx("span",{className:"comisiones-total-label",children:"Total del mes"}),e.jsxs("span",{className:"comisiones-total-value",children:["$",s.totalMes.toLocaleString("es-CL")]})]}),e.jsxs("div",{className:"comisiones-stats-mini",children:[e.jsxs("div",{className:"stat-mini",children:[e.jsx("span",{className:"stat-mini-label",children:"Promedio"}),e.jsxs("span",{className:"stat-mini-value",children:["$",s.promedioComision.toLocaleString("es-CL")]})]}),e.jsxs("div",{className:"stat-mini",children:[e.jsx("span",{className:"stat-mini-label",children:"Porcentaje de ComisiÃ³n"}),l?e.jsxs("span",{className:"stat-mini-value",style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(G,{type:"number",value:h,onChange:r=>g(Number(r.target.value)),onPressEnter:c,onBlur:c,suffix:"%",autoFocus:!0,style:{width:"70px"},size:"small",min:0,max:100}),e.jsx(I,{type:"text",size:"small",onClick:N,style:{padding:"0 4px",minWidth:"auto",height:"auto"},children:"âœ•"})]}):e.jsxs("span",{className:"stat-mini-value",onClick:i,style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},title:"Click para editar",children:[n,"%",e.jsx(V,{size:12,style:{opacity:.6}})]})]})]})]}),e.jsxs("div",{className:"comisiones-top3-compact",children:[e.jsx("h4",{className:"comisiones-top3-title",children:"ğŸ’° Top 3 Ingresos"}),e.jsx("div",{className:"top3-list-compact",children:p.map((r,o)=>e.jsxs("div",{className:"top3-item-compact",onClick:()=>j(r.propiedadId),children:[e.jsx("div",{className:"top3-rank",children:f(o)}),e.jsxs("div",{className:"top3-info",children:[e.jsx("span",{className:"top3-nombre",children:r.propiedadNombre}),e.jsxs("span",{className:"top3-monto",children:["$",r.monto.toLocaleString("es-CL")]})]})]},r.id))}),e.jsx("button",{className:"btn-ver-todas",onClick:()=>x.info("Ver tabla completa prÃ³ximamente"),children:"Ver todas las comisiones"})]})]})},me=({gastos:a,onRegistrarGasto:s,onAdjuntarFactura:n})=>{const[t,d]=u.useState("Fijo"),[l,m]=u.useState(null);console.log("ğŸ» GastosFacturas: Componente montado con gastos =",a);const h=a.filter(o=>o.categoria==="Fijo"),g=a.filter(o=>o.categoria==="Variable"),p=t==="Fijo"?h:g,f=a.reduce((o,C)=>o+C.monto,0),j=a.filter(o=>o.estado==="Pendiente"||o.estado==="Atrasado"),i=o=>({Pagado:"gasto-estado-pagado",Pendiente:"gasto-estado-pendiente",Atrasado:"gasto-estado-atrasado"})[o],c=o=>({Pagado:"ğŸŸ¢",Pendiente:"ğŸŸ¡",Atrasado:"ğŸ”´"})[o],N=o=>{m("El Oso Cuidadoso verificÃ³ el pago ğŸ§¾"),x.success(`${o.nombre} marcado como pagado`),setTimeout(()=>m(null),3e3)},r=()=>{x.info("Conectando con Fintoc...")};return H.useEffect(()=>{if(j.length>0&&!l){const o=setTimeout(()=>{m("El Oso Cuidadoso te recuerda registrarlos pronto ğŸ¾"),setTimeout(()=>m(null),4e3)},2e3);return()=>clearTimeout(o)}},[j.length]),e.jsxs("div",{className:"gastos-facturas-compact",children:[e.jsxs("div",{className:"gastos-total-mini",children:[e.jsx("span",{className:"gastos-total-mini-label",children:"Total del Mes"}),e.jsxs("span",{className:"gastos-total-mini-value",children:["$",f.toLocaleString("es-CL")]})]}),e.jsxs("div",{className:"gastos-tabs",children:[e.jsxs("button",{className:`gastos-tab ${t==="Fijo"?"active":""}`,onClick:()=>d("Fijo"),children:["Fijos (",h.length,")"]}),e.jsxs("button",{className:`gastos-tab ${t==="Variable"?"active":""}`,onClick:()=>d("Variable"),children:["Variables (",g.length,")"]})]}),l&&e.jsx("div",{className:"oso-message-gastos",children:l}),e.jsx("div",{className:"gastos-list-compact gastos-list-fade",children:p.map(o=>e.jsxs("div",{className:`gasto-card-mini ${i(o.estado)}`,children:[e.jsx("div",{className:"gasto-border-indicator"}),e.jsxs("div",{className:"gasto-mini-content",children:[e.jsxs("div",{className:"gasto-mini-header",children:[e.jsx("span",{className:"gasto-mini-nombre",children:o.nombre}),e.jsxs("span",{className:"gasto-mini-monto",children:["$",o.monto.toLocaleString("es-CL")]})]}),e.jsxs("div",{className:"gasto-mini-footer",children:[e.jsx("span",{className:"gasto-mini-categoria",children:o.categoria}),e.jsxs("div",{className:"gasto-mini-footer-right",children:[e.jsxs("span",{className:`gasto-mini-estado ${i(o.estado)}`,children:[c(o.estado)," ",o.estado]}),o.estado!=="Pagado"&&e.jsx("button",{className:"btn-marcar-pagado",onClick:()=>N(o),title:"Marcar como pagado",children:"âœ“"})]})]})]})]},o.id))}),e.jsxs("div",{className:"gastos-actions",children:[e.jsx("button",{className:"btn-gasto-action btn-registrar",onClick:s,children:"â• Registrar nuevo gasto"}),e.jsx("button",{className:"btn-gasto-action btn-adjuntar",onClick:()=>n(""),children:"ğŸ“ Adjuntar factura"})]}),e.jsx("div",{className:"gastos-fintoc-section",children:e.jsx("button",{className:"btn-fintoc",onClick:r,children:"ğŸ”— Conectar cuenta bancaria (Fintoc)"})})]})},ue=({configuracion:a,onGuardarConfiguracion:s})=>{console.log("ğŸ» ConfiguracionPersonal: Componente montado con config =",a);const[n,t]=u.useState({...a,porcentajeComision:a.porcentajeComision??50});return e.jsx("div",{className:"configuracion-personal-compact",children:e.jsxs("div",{className:"config-mini-header",children:[e.jsx("span",{className:"config-mini-icon",children:"ğŸ»"}),e.jsx("span",{className:"config-mini-title",children:"Comentale a Oso curioso cÃ³mo te gustarÃ­a que mejorara tu experiencia."})]})})},pe=()=>{var f,j;console.log("ğŸ» Finanzas: Componente montado");const{agent:a}=X(),[s,n]=u.useState(null),[t,d]=u.useState(!0);console.log("ğŸ» Finanzas: agent =",a),u.useEffect(()=>{console.log("ğŸ» Finanzas: useEffect ejecutado"),l()},[]);const l=async()=>{try{console.log("ğŸ» Finanzas: Iniciando fetchData..."),d(!0);const i=await ne();console.log("ğŸ» Finanzas: Datos recibidos =",i),n(i)}catch(i){console.error("ğŸ» Finanzas: ERROR en fetchData =",i),x.error("Error al cargar datos financieros")}finally{d(!1),console.log("ğŸ» Finanzas: fetchData completado")}},m=()=>{x.success("Exportando PDF con branding Rentoso...")},h=i=>{if(s){const c=s.meta.progreso,N=Math.round(c/i*100),r={...s.meta,objetivoMensual:i,porcentaje:N};n({...s,meta:r})}},g=i=>{if(s){const c={...s.configuracion,porcentajeComision:i};n({...s,configuracion:c})}};if(t)return console.log("ğŸ» Finanzas: Mostrando spinner de carga..."),e.jsxs("div",{className:"finanzas-loading",children:[e.jsx(Z,{size:"large"}),e.jsx("p",{children:"Cargando tu informaciÃ³n financiera..."})]});if(!s)return console.log("ğŸ» Finanzas: No hay datos disponibles"),null;console.log("ğŸ» Finanzas: Renderizando pÃ¡gina completa"),console.log("ğŸ» Finanzas: ConfiguraciÃ³n actual =",s.configuracion),console.log("ğŸ» Finanzas: porcentajeComision a pasar =",((f=s.configuracion)==null?void 0:f.porcentajeComision)??50);const p=i=>{const c=document.getElementById(i);c&&c.scrollIntoView({behavior:"smooth",block:"start"})};return e.jsxs("div",{className:"finanzas-page",children:[e.jsxs("div",{className:"finanzas-header-compact",children:[e.jsx("div",{className:"finanzas-header-top",children:e.jsxs("div",{children:[e.jsx("h2",{className:"title-text mb-0",children:"Finanzas"}),e.jsx("div",{className:"paragraph-text paragraph-secondary",children:"Tu centro de control financiero"})]})}),e.jsxs("nav",{className:"finanzas-quick-nav",children:[e.jsxs("button",{onClick:()=>p("vista-general"),className:"quick-nav-btn",children:[e.jsx("span",{children:"ğŸ“Š"})," Vista General"]}),e.jsxs("button",{onClick:()=>p("comisiones"),className:"quick-nav-btn",children:[e.jsx("span",{children:"ğŸ’¼"})," Comisiones"]})]})]}),e.jsxs("div",{className:"finanzas-dashboard-layout",children:[e.jsxs("div",{className:"finanzas-main-column",children:[e.jsx("section",{id:"vista-general",className:"finanzas-section-compact finanzas-section--vista-general",children:e.jsx(le,{userName:(a==null?void 0:a.nombre)||"Francisco",meta:s.meta,kpis:s.kpis,datosGrafico:s.porMes,onExportarPDF:m,onVerFlujo:()=>x.info("Flujo detallado prÃ³ximamente"),onUpdateMeta:h})}),e.jsxs("section",{id:"comisiones",className:"finanzas-section-compact finanzas-section--comisiones",children:[e.jsxs("div",{className:"section-title-mini",children:[e.jsx("span",{className:"section-title-emoji",children:"ğŸ’¼"}),e.jsx("span",{className:"section-title-text",children:"Comisiones"})]}),e.jsx(de,{comisiones:s.comisiones,stats:s.comisionesStats,porcentajeComision:((j=s.configuracion)==null?void 0:j.porcentajeComision)??50,onUpdatePorcentaje:g})]})]}),e.jsxs("div",{className:"finanzas-sidebar-column",children:[e.jsxs("section",{id:"gastos",className:"finanzas-section-compact finanzas-section--gastos",children:[e.jsxs("div",{className:"section-title-mini",children:[e.jsx("span",{className:"section-title-emoji",children:"ğŸ§¾"}),e.jsx("span",{className:"section-title-text",children:"Gastos"})]}),e.jsx(me,{gastos:s.gastos,onRegistrarGasto:()=>x.info("Modal de registro prÃ³ximamente"),onAdjuntarFactura:i=>x.info(`Adjuntar factura: ${i}`)})]}),e.jsxs("section",{className:"finanzas-section-compact finanzas-section--configuracion",children:[e.jsxs("div",{className:"section-title-mini",children:[e.jsx("span",{className:"section-title-emoji",children:"âš™ï¸"}),e.jsx("span",{className:"section-title-text",children:"ConfiguraciÃ³n"})]}),e.jsx(ue,{configuracion:s.configuracion,onGuardarConfiguracion:i=>{console.log("ğŸ» Finanzas: Nueva configuraciÃ³n guardada:",i),x.success("ConfiguraciÃ³n guardada âœ“"),n({...s,configuracion:i})}})]})]})]})]})};export{pe as default};
